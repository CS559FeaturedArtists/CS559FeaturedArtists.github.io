<!DOCTYPE html>
<html>

<body>
  <h1> Cube
  </h1>

  <body>
    Move camera using wasd, Try moving around if you are spawned inside of a cube :)
    <br>
    <br>
  </body>
  <canvas id="myCanvas" width="400" height="400"></canvas>

  <div>
    <input type="range" min="0" max="200" value="0" class="slider" id="slider1">
    Move Camera Side to Side
    <input type="range" min="-100" max="100" value="0" class="slider" id="slider2">
    Move Camera Up and Down
    <input type="range" min="0" max="100" value="50" class="slider" id="timeStep">
    Change How Fast Time Steps
  </div>

</body>

<head>
  <meta name="description" content="Pyramind and sun">
  <meta charset="utf-8">
  <title>Pyramind and Sun</title>
</head>

<canvas id="myCanvas" width="600" height="600">

</canvas>
<script type="text/javascript" src="gl-matrix-min.js"></script>
<script id="vertexShader" type="no-js">
  precision highp float;
  attribute vec3 vPos;
  attribute vec3 vNorm;
  attribute vec3 vCol;
  attribute float moves;
  varying vec3 aPos;
  varying vec3 fNorm;
  varying vec3 fPos;
  varying vec3 fCol;
  varying float fMoves;
  uniform mat4 uMV;
  uniform mat3 uMVn;
  uniform mat4 uMVP;
  uniform float uTime;

  void main(void) {
    if(moves > 0.0){
      vec3 light1 = vec3(0.0,100.0*sin(uTime),100.0*cos(uTime));
      aPos = light1+vPos;
      gl_Position = uMVP * vec4(aPos, 1.0);
      fPos = (uMV*vec4(aPos,1.0)).xyz;
      fCol = vec3(1.0,1.0,1.0);
      fMoves = 1.0;
    }
    else{
      gl_Position = uMVP * vec4(vPos, 1.0);
      fPos = (uMV * vec4(vPos,1.0)).xyz;
      aPos = vPos;
      fCol = vCol;
      fMoves = -1.0;
    }
    fNorm = vNorm;
  }
</script>

<script id="fragmentShader" type="no-js">
  precision highp float;
  varying vec3 fNorm;
  varying vec3 fPos;
  varying vec3 fCol;
  varying vec3 aPos;
  varying float fMoves;
  uniform mat4 uMV;
  uniform mat3 uMVn;
  uniform mat4 uMVP;
  uniform float uTime;

  const vec3 lightPos1 = vec3(0.0,-100.0,0.0);
  const vec3 lightPos2 = vec3(0.0,100.0,0.0);
  const vec3 specLightCol = vec3(1.0,1.0,1.0);
  const float ambientCoeff = 0.2;
  const float specCoeff = 0.8;
  const float specExp = 8.0;


  float specular(vec3 lightPos, vec3 norm, vec3 pos, float intensity, float exp){

    vec3 n = normalize(norm);
    vec3 h = normalize(lightPos-pos);

    return specCoeff * pow(max(0.0,dot(n,h)),specExp);
  }

  float diffuse(vec3 lightPos, vec3 norm, float intensity, float amb){
    vec3 l = normalize(lightPos);
    return amb + intensity*max(0.0,dot(l,norm));
  }

  void main(void){
    vec3 light1 = vec3(0,100.0*sin(uTime),100.0*cos(uTime));
    vec3 n = normalize(uMVn*fNorm);
    vec3 diff = diffuse(lightPos2,fNorm,ambientCoeff,ambientCoeff) * fCol;
    vec3 spec = specular(light1,fNorm,aPos,specCoeff,specExp) * specLightCol;
    gl_FragColor = vec4(diff+spec,1.0);
    if(fMoves>0.0){
      gl_FragColor = vec4(1.0,1.0,0.0,1.0);
    }
    
  }
</script>
<script type="text/javascript" src="draw.js" />
<\html>
  </script>
  <\html>
    </script>
    <\html>
      </script>
      <\html>
        </script>
        <\html>
          </script>
          <\html>
            </script>
            <\html>
              </script>
              <\html>
                </script>
                <\html>
                  </script>
                  <\html>
                    </script>
                    <\html>
                      </script>
                      <\html>
                        </script>
                        <\html>
                          </script>
                          <\html>
                            </script>
                            <\html>
                              </script>
                              <\html>
                                </script>
                                <\html>
                                  </script>
                                  <\html>
                                    </script>
                                    <\html>
                                      </script>
                                      <\html>
                                        </script>
                                        <\html>
                                          </script>
                                          <\html>
                                            </script>
                                            <\html>
                                              </script>
                                              <\html>
                                                </script>
                                                <\html>
                                                  </script>
                                                  <\html>
                                                    </script>
                                                    <\html>
                                                      </script>
                                                      <\html>
                                                        </script>
                                                        <\html>
                                                          </script>
                                                          <\html>
                                                            </script>
                                                            <\html>
                                                              </script>
                                                              <\html>
                                                                </script>
                                                                <\html>
                                                                  </script>
                                                                  <\html>
                                                                    </script>
                                                                    <\html>
                                                                      </script>
                                                                      <\html>
                                                                        </script>
                                                                        <\html>
                                                                          </script>
                                                                          <\html>
                                                                            </script>
                                                                            <\html>
                                                                              </script>
                                                                              <\html>
                                                                                </script>
                                                                                <\html>
                                                                                  </script>
                                                                                  <\html>
                                                                                    </script>
                                                                                    <\html>
                                                                                      </script>
                                                                                      <\html>
                                                                                        </script>
                                                                                        <\html>
                                                                                          </script>
                                                                                          <\html>
                                                                                            </script>
                                                                                            <\html>
                                                                                              </script>
                                                                                              <\html>
                                                                                                </script>
                                                                                                <\html>
                                                                                                  </script>
                                                                                                  <\html>
                                                                                                    </script>
                                                                                                    <\html>
                                                                                                      </script>
                                                                                                      <\html>
                                                                                                        </script>
                                                                                                        <\html>
                                                                                                          </script>
                                                                                                          <\html>
                                                                                                            </script>
                                                                                                            <\html>
                                                                                                              </script>
                                                                                                              <\html>
                                                                                                                </script>
                                                                                                                <\html>
                                                                                                                  </script>
                                                                                                                  <\html>
                                                                                                                    </script>
                                                                                                                    <\html>
                                                                                                                      </script>
                                                                                                                      <\html>
                                                                                                                        </script>
                                                                                                                        <\html>
